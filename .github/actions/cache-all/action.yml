# Cache all project output files

name: Cache
description: Cache all project output files

inputs:
  configuration:
    description: The configuration to use (development | insiders | production)
    required: true
    default: development

runs:
  using: composite
  steps:
    - name: Cache client
      uses: ./.github/actions/cache
      with:
        path: ./packages/client/dist
        cache-key: client
        configuration: ${{ inputs.configuration }}

    - name: Cache server
      uses: ./.github/actions/cache
      with:
        path: ./packages/server/target
        cache-key: server
        configuration: ${{ inputs.configuration }}

    - name: Cache protobuf
      uses: ./.github/actions/cache
      with:
        path: ./packages/proto/dist
        cache-key: proto
        configuration: ${{ inputs.configuration }}

    - name: Cache maven packages
      uses: ./.github/actions/cache
      with:
        path: ~/.m2
        cache-key: mwn-packages
        configuration: ${{ inputs.configuration }}
